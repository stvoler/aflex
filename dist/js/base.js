window.addEventListener("load",function(){document.querySelector("body").classList.remove("loading")});class Modal{static returnModalBg(){return document.getElementById("modal-bg")}static returnModalOpenButton(){return document.querySelectorAll('[data-toggle="modal"]')}static returnCloseAllModalButton(){return document.querySelectorAll(".close-js")}static returnCloseModalButton(){return document.querySelectorAll(".close-current-js")}initializeModal(){this.constructor.returnModalOpenButton().forEach(e=>{e.addEventListener("click",()=>{let t=e.getAttribute("data-target");if(t){let e=document.querySelector("[data-modal="+t);this.constructor.trigger_modal(e)}"login-modal"==t&&document.querySelector(".app-modal").classList.add("show")})})}close_modals(){document.querySelectorAll("[data-modal]").forEach(e=>{e.classList.remove("show"),Modal.returnModalBg().classList.remove("open")})}close_modal(e){e.classList.remove("show");let t=document.querySelectorAll("[data-modal]"),s=0;t.forEach(e=>{e.classList.contains("show")&&s++}),s<1&&Modal.returnModalBg().classList.remove("open")}static trigger_modal(e){e&&(e.classList.add("show"),Modal.returnModalBg().classList.add("open"))}}let modal=new Modal;modal.initializeModal(),Modal.returnCloseAllModalButton().forEach(e=>{e.addEventListener("click",()=>{modal.close_modals()})}),window.onclick=function(e){e.target==Modal.returnModalBg()&&modal.close_modals()},Modal.returnCloseModalButton().forEach(e=>{e.addEventListener("click",()=>{let t=e.closest("[data-modal]");modal.close_modal(t)})});const CLASS_NAME_SELECT="select",CLASS_NAME_ACTIVE="select_show",CLASS_NAME_SELECTED="select-option-selected",SELECTOR_ACTIVE=".select_show",SELECTOR_DATA="[data-select]",SELECTOR_DATA_TOGGLE='[data-select="toggle"]',SELECTOR_OPTION_SELECTED=".select-option-selected";class CustomSelect{constructor(e,t){this._elRoot="string"==typeof e?document.querySelector(e):e,this._params=t||{},this._params.options&&(this._elRoot.classList.add(CLASS_NAME_SELECT),this._elRoot.innerHTML=CustomSelect.template(this._params)),this._elToggle=this._elRoot.querySelector(SELECTOR_DATA_TOGGLE),this._elRoot.addEventListener("click",this._onClick.bind(this))}_onClick(e){const t=e.target;switch(t.closest(SELECTOR_DATA).dataset.select){case"toggle":this.toggle();break;case"option":this._changeValue(t)}}_update(e){const t=this._elRoot.querySelector(SELECTOR_OPTION_SELECTED);return t&&t.classList.remove(CLASS_NAME_SELECTED),e.classList.add(CLASS_NAME_SELECTED),this._elToggle.textContent=e.textContent,this._elToggle.value=e.dataset.value,this._elToggle.dataset.index=e.dataset.index,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,e),e.dataset.value}_reset(){const e=this._elRoot.querySelector(SELECTOR_OPTION_SELECTED);return e&&e.classList.remove(CLASS_NAME_SELECTED),this._elToggle.textContent="Выберите из списка",this._elToggle.value="",this._elToggle.dataset.index=-1,this._elRoot.dispatchEvent(new CustomEvent("select.change")),this._params.onSelected&&this._params.onSelected(this,null),""}_changeValue(e){e.classList.contains(CLASS_NAME_SELECTED)&&this.hide(),this._update(e),this.hide(),scroll.start()}show(){document.querySelectorAll(SELECTOR_ACTIVE).forEach(e=>{e.classList.remove(CLASS_NAME_ACTIVE)}),this._elRoot.classList.add(CLASS_NAME_ACTIVE),scroll.stop()}hide(){this._elRoot.classList.remove(CLASS_NAME_ACTIVE)}toggle(){this._elRoot.classList.contains(CLASS_NAME_ACTIVE)?this.hide():this.show()}dispose(){this._elRoot.removeEventListener("click",this._onClick)}get value(){return this._elToggle.value}set value(e){let t=!1;if(this._elRoot.querySelectorAll(".select-option").forEach(s=>{if(s.dataset.value===e)return t=!0,this._update(s)}),!t)return this._reset()}get selectedIndex(){return this._elToggle.dataset.index}set selectedIndex(e){const t=this._elRoot.querySelector(`.select-option[data-index="${e}"]`);return t?this._update(t):this._reset()}}CustomSelect.template=(e=>{const t=e.name,s=e.options,l=e.targetValue;let o=[],a=-1,c="",n="Выберите из списка";return s.forEach((e,t)=>{let s="";e[0]===l&&(s=" select-option-selected",a=t,c=e[0],n=e[1]),o.push(`<li class="select-option${s}" data-select="option" data-value="${e[0]}" data-index="${t}">${e[1]}</li>`)}),`<button type="button" class="select-toggle" name="${t}" value="${c}" data-select="toggle" data-index="${a}">${n}</button>\n  <div class="select-dropdown">\n    <ul class="select-options">${o.join("")}</ul>\n  </div>`}),document.addEventListener("click",e=>{e.target.closest(".select")||document.querySelectorAll(SELECTOR_ACTIVE).forEach(e=>{e.classList.remove(CLASS_NAME_ACTIVE),scroll.start()})});const selects=document.querySelectorAll(".select");selects.forEach(e=>{new CustomSelect(e)});